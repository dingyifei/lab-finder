# Story 6.3: LinkedIn Profile Matching with Confidence Scores

## Status

**Draft**

## Story

**As a** user,
**I want** lab members matched to LinkedIn profiles with confidence scores,
**so that** I can assess match reliability and avoid false positives.

## Acceptance Criteria

1. LinkedIn search performed for each lab member (FR22)
2. Candidate profiles evaluated by LLM
3. Matching considers: name, university affiliation, degree program, timeline
4. Confidence score (0-100) generated for each match (FR22)
5. School affiliation differences easily identified (reduces false positives)
6. Low-confidence matches flagged for user review
7. No match found handled gracefully (not all members have LinkedIn)

## Tasks / Subtasks

- [ ] **Task 1: Search LinkedIn for Each Member** (AC: 1)
  - [ ] Use mcp-linkedin search_people tool
  - [ ] Query: name + university filters
  - [ ] Get top candidate profiles

- [ ] **Task 2: LLM-Based Profile Matching** (AC: 2, 3, 4)
  - [ ] Use LLM to evaluate candidates
  - [ ] Consider: name match, university, timing
  - [ ] Generate confidence score (0-100)

- [ ] **Task 3: Identify Affiliation Mismatches** (AC: 5)
  - [ ] Check if university matches
  - [ ] Flag different institutions

- [ ] **Task 4: Handle No Match** (AC: 7)
  - [ ] If no good match: Set linkedin_url = None
  - [ ] Flag: "no_linkedin_profile"

- [ ] **Task 5: Create LabMember Model** (AC: 1, 4)
  - [ ] Create `src/models/lab_member.py`
  - [ ] Fields:
    ```python
    class LabMember(BaseModel):
        name: str
        linkedin_url: Optional[str] = None
        linkedin_match_confidence: int = 0
        entry_year: Optional[int] = None
        data_quality_flags: list[str] = []
    ```

## Dev Notes

### Source Tree Location
- Modify: `src/agents/linkedin_matcher.py`
- Create: `src/models/lab_member.py`

**LLM Matching Prompt:**
```python
LINKEDIN_MATCH_PROMPT = """
Lab Member: {member_name}
University: {university}

LinkedIn Profile:
- Name: {profile_name}
- Headline: {headline}
- School: {education}

Match confidence (0-100) and reasoning.
"""
```

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-06 | 0.1 | Initial story creation | Sarah (PO) |
