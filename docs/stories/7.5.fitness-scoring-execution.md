# Story 7.5: Multi-Factor Fitness Scoring Execution

## Status

**Draft**

## Story

**As a** user,
**I want** each lab scored against identified criteria with weighted factors,
**so that** I get ranked labs reflecting best overall fit.

## Acceptance Criteria

1. Each lab scored against all identified criteria (FR25)
2. Weights applied to criteria based on importance
3. Scores normalized to consistent scale (0-100)
4. Overall fitness score calculated per lab
5. Scoring rationale documented for each lab
6. Edge cases handled (missing data doesn't zero-out score)
7. Scores saved for report generation in Epic 8

## Tasks / Subtasks

- [ ] **Task 1: Score Each Lab Against Criteria** (AC: 1)
  - [ ] For each criterion, calculate lab score
  - [ ] Use LLM for qualitative criteria
  - [ ] Use metrics for quantitative criteria

- [ ] **Task 2: Apply Weights** (AC: 2)
  - [ ] Multiply each criterion score by weight
  - [ ] Sum weighted scores

- [ ] **Task 3: Normalize Scores** (AC: 3)
  - [ ] Normalize to 0-100 scale
  - [ ] Handle outliers

- [ ] **Task 4: Calculate Overall Fitness** (AC: 4)
  - [ ] Aggregate weighted scores
  - [ ] Store in Lab.fitness_score

- [ ] **Task 5: Document Scoring Rationale** (AC: 5)
  - [ ] For each lab, explain score
  - [ ] List contributing factors

- [ ] **Task 6: Handle Missing Data** (AC: 6)
  - [ ] If criterion data missing, use neutral score
  - [ ] Don't penalize for unavailable data

- [ ] **Task 7: Update Lab Model** (AC: 4, 7)
  - [ ] Add fields:
    ```python
    fitness_score: int = 0  # 0-100
    scoring_rationale: str = ""
    ```

## Dev Notes

### Source Tree Location
- Modify: `src/agents/fitness_scorer.py`
- Modify: `src/models/lab.py`

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-06 | 0.1 | Initial story creation | Sarah (PO) |
