# Story 6.4: PhD Graduation & Departure Detection

## Status

**Draft**

## Story

**As a** user,
**I want** graduating and recently departed PhD students identified,
**so that** I can target labs with upcoming position openings.

## Acceptance Criteria

1. LinkedIn profiles analyzed for entry year/start date (FR21)
2. Configured average graduation duration used (FR5, e.g., 5.5 years)
3. Expected graduation year calculated (entry year + duration)
4. Currently graduating PhDs identified (within next year)
5. Recently departed PhDs identified (graduated within last year)
6. Timeline uncertainty acknowledged (some variation in graduation timing)
7. Position availability signals saved for fitness scoring

## Tasks / Subtasks

- [ ] **Task 1: Extract Entry Year from LinkedIn** (AC: 1)
  - [ ] Parse education section
  - [ ] Extract PhD start date
  - [ ] Store in LabMember.entry_year

- [ ] **Task 2: Calculate Expected Graduation** (AC: 2, 3)
  - [ ] Load avg_phd_duration from config (default: 5.5)
  - [ ] Calculate: graduation_year = entry_year + duration
  - [ ] Store in LabMember.expected_graduation_year

- [ ] **Task 3: Identify Graduating Students** (AC: 4)
  - [ ] Check if expected_graduation within next year
  - [ ] Flag: "graduating_soon"

- [ ] **Task 4: Identify Recent Departures** (AC: 5)
  - [ ] Check if graduated within last year
  - [ ] Flag: "recently_departed"

- [ ] **Task 5: Update LabMember Model** (AC: 1, 3, 7)
  - [ ] Add fields:
    ```python
    entry_year: Optional[int] = None
    expected_graduation_year: Optional[int] = None
    position_status: str = "unknown"  # active/graduating/departed
    ```

## Dev Notes

### Source Tree Location
- Modify: `src/agents/linkedin_matcher.py`
- Modify: `src/models/lab_member.py`

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-06 | 0.1 | Initial story creation | Sarah (PO) |
