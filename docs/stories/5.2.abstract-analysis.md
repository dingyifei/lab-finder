# Story 5.2: Abstract & Acknowledgment Analysis

## Status

**Draft**

## Story

**As a** user,
**I want** paper abstracts and acknowledgment sections analyzed for research alignment,
**so that** the system focuses on most relevant content without processing full papers.

## Acceptance Criteria

1. Abstracts extracted from publication data (FR30)
2. Acknowledgment sections extracted where available
3. LLM analyzes abstract content for alignment with user research interests
4. Acknowledgments analyzed for collaboration patterns and funding sources
5. Relevance score generated for each paper
6. Analysis optimized (abstracts only, not full text) for efficiency
7. Missing abstracts handled (use title as fallback)

## Tasks / Subtasks

- [ ] **Task 1: Extract Abstracts** (AC: 1, 7)
  - [ ] Get abstracts from publication metadata
  - [ ] If missing, flag and use title only
  - [ ] Store in Publication.abstract

- [ ] **Task 2: Extract Acknowledgments** (AC: 2)
  - [ ] Look for acknowledgment section in paper metadata
  - [ ] Parse collaborator names and funding sources
  - [ ] Store in Publication.acknowledgments field

- [ ] **Task 3: LLM-Based Abstract Relevance Analysis** (AC: 3, 5)
  - [ ] Prompt LLM with user interests + abstract
  - [ ] Request relevance score (0-100)
  - [ ] Store in Publication.relevance_score

- [ ] **Task 4: Analyze Acknowledgments for Collaborations** (AC: 4)
  - [ ] Extract collaborator names from acknowledgments
  - [ ] Identify funding agencies
  - [ ] Store collaboration data for later analysis

- [ ] **Task 5: Update Publication Model** (AC: 2, 5)
  - [ ] Add fields:
    ```python
    acknowledgments: str = ""
    relevance_score: int = 0  # 0-100
    collaborators: list[str] = []
    ```

## Dev Notes

### Source Tree Location
- Modify: `src/agents/publication_retrieval.py`
- Modify: `src/models/publication.py`

**LLM Relevance Prompt:**
```python
ABSTRACT_RELEVANCE_PROMPT = """
User Research Interests: {interests}

Paper Abstract: {abstract}

Rate relevance (0-100) and explain why.
"""
```

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-06 | 0.1 | Initial story creation | Sarah (PO) |
