# Story 6.2: Parallel LinkedIn Profile Matching

## Status

**Draft**

## Story

**As a** user,
**I want** efficient parallel LinkedIn profile matching,
**so that** member matching completes in reasonable time.

## Acceptance Criteria

1. Multiple lab members processed in parallel via mcp-linkedin (updated from queue approach)
2. MCP server handles session and rate limiting internally
3. Progress shows "LinkedIn: Processing member X of Y"
4. Timeouts prevent blocking on slow requests
5. Failed requests don't block processing

## Tasks / Subtasks

- [ ] **Task 1: Implement Parallel Profile Matching** (AC: 1)
  - [ ] Process multiple members concurrently
  - [ ] Use asyncio for parallel MCP calls
  - [ ] mcp-linkedin handles rate limiting internally

- [ ] **Task 2: Handle MCP Server Rate Limits** (AC: 2)
  - [ ] MCP server manages LinkedIn rate limits
  - [ ] Application respects MCP backpressure
  - [ ] Retry on rate limit responses

- [ ] **Task 3: Implement Timeouts** (AC: 4)
  - [ ] 30 second timeout per LinkedIn search
  - [ ] Handle timeout gracefully

- [ ] **Task 4: Handle Failed Requests** (AC: 5)
  - [ ] Log failures
  - [ ] Continue with next member
  - [ ] Flag: "linkedin_match_failed"

## Dev Notes

### Source Tree Location
- Modify: `src/agents/linkedin_matcher.py`

**Architecture Note:** mcp-linkedin MCP server handles session management and rate limiting internally. No queue needed in application code.

**Parallel Processing:**
```python
async def match_lab_members(members: list[LabMember]):
    tasks = [match_single_member(m) for m in members]
    results = await asyncio.gather(*tasks, return_exceptions=True)
    # Handle results
```

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-06 | 0.1 | Initial story creation | Sarah (PO) |
