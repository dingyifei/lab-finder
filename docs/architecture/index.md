# Lab Finder Architecture Document

## Table of Contents

- [Lab Finder Architecture Document](#table-of-contents)
  - [Introduction](./introduction.md)
    - [Starter Template or Existing Project](./introduction.md#starter-template-or-existing-project)
    - [Change Log](./introduction.md#change-log)
  - [High Level Architecture](./high-level-architecture.md)
    - [Technical Summary](./high-level-architecture.md#technical-summary)
    - [High Level Overview](./high-level-architecture.md#high-level-overview)
    - [High Level Project Diagram](./high-level-architecture.md#high-level-project-diagram)
    - [Architectural and Design Patterns](./high-level-architecture.md#architectural-and-design-patterns)
  - [Tech Stack](./tech-stack.md)
    - [Cloud Infrastructure](./tech-stack.md#cloud-infrastructure)
    - [Technology Stack Table](./tech-stack.md#technology-stack-table)
    - [Key Technology Decisions](./tech-stack.md#key-technology-decisions)
    - [Web Scraping Tool Selection](./tech-stack.md#web-scraping-tool-selection)
  - [Data Models](./data-models.md)
    - [User Profile](./data-models.md#user-profile)
    - [Department](./data-models.md#department)
    - [Professor](./data-models.md#professor)
    - [Lab](./data-models.md#lab)
    - [Lab Member](./data-models.md#lab-member)
    - [Publication](./data-models.md#publication)
    - [Collaboration](./data-models.md#collaboration)
    - [Fitness Score](./data-models.md#fitness-score)
    - [Data Model Design Principles](./data-models.md#data-model-design-principles)
  - [Agent Definitions](./agent-definitions.md)
    - [Phase 0: Configuration Validator Agent](./agent-definitions.md#phase-0-configuration-validator-agent)
    - [Phase 1: University Structure Discovery Agent](./agent-definitions.md#phase-1-university-structure-discovery-agent)
    - [Phase 2: Professor Discovery Agent](./agent-definitions.md#phase-2-professor-discovery-agent)
    - [Phase 2: Professor Filter Agent](./agent-definitions.md#phase-2-professor-filter-agent)
    - [Phase 3: Lab Scraper Agent](./agent-definitions.md#phase-3-lab-scraper-agent)
    - [Phase 3: Publication Retrieval Agent](./agent-definitions.md#phase-3-publication-retrieval-agent)
    - [Phase 3: Member Inference Agent](./agent-definitions.md#phase-3-member-inference-agent)
    - [Phase 4: LinkedIn Matcher Agent](./agent-definitions.md#phase-4-linkedin-matcher-agent)
    - [Phase 5: Authorship Analyzer](./agent-definitions.md#phase-5-authorship-analyzer)
    - [Phase 5: Fitness Scoring Engine](./agent-definitions.md#phase-5-fitness-scoring-engine)
    - [Phase 6: Report Generator](./agent-definitions.md#phase-6-report-generator)
  - [Components](./components.md)
    - [CLI Coordinator](./components.md#cli-coordinator)
    - [Configuration Validator](./components.md#configuration-validator)
    - [University Structure Discovery Agent](./components.md#university-structure-discovery-agent)
    - [Professor Discovery & Filter Agent](./components.md#professor-discovery-filter-agent)
    - [Lab Website Intelligence Agent](./components.md#lab-website-intelligence-agent)
    - [Publication Retrieval Agent](./components.md#publication-retrieval-agent)
    - [Lab Member Inference Agent](./components.md#lab-member-inference-agent)
    - [LinkedIn Matcher Agent](./components.md#linkedin-matcher-agent)
    - [Authorship Analyzer](./components.md#authorship-analyzer)
    - [Fitness Scoring Engine](./components.md#fitness-scoring-engine)
    - [Report Generator](./components.md#report-generator)
    - [Checkpoint Manager](./components.md#checkpoint-manager)
    - [Progress Tracker](./components.md#progress-tracker)
    - [Component Diagram](./components.md#component-diagram)
  - [External APIs](./external-apis.md)
    - [paper-search-mcp (MCP Server)](./external-apis.md#paper-search-mcp-mcp-server)
    - [mcp-linkedin (MCP Server)](./external-apis.md#mcp-linkedin-mcp-server)
    - [Archive.org Wayback Machine API](./external-apis.md#archiveorg-wayback-machine-api)
    - [Scimago Journal Rank (SJR) - Offline CSV](./external-apis.md#scimago-journal-rank-sjr-offline-csv)
  - [Core Workflows](./core-workflows.md)
    - [Workflow 1: End-to-End Lab Discovery Pipeline](./core-workflows.md#workflow-1-end-to-end-lab-discovery-pipeline)
    - [Workflow 2: Checkpoint Resume After Failure](./core-workflows.md#workflow-2-checkpoint-resume-after-failure)
    - [Workflow 3: Parallel LinkedIn MCP Access Pattern](./core-workflows.md#workflow-3-parallel-linkedin-mcp-access-pattern)
    - [Workflow 4: Graceful Degradation for Missing Data](./core-workflows.md#workflow-4-graceful-degradation-for-missing-data)
  - [Database Schema](./database-schema.md)
    - [Checkpoint Directory Structure](./database-schema.md#checkpoint-directory-structure)
    - [JSONL Schema Definitions](./database-schema.md#jsonl-schema-definitions)
    - [Checkpoint Loading Strategy](./database-schema.md#checkpoint-loading-strategy)
  - [Source Tree](./source-tree.md)
    - [Key Source Tree Decisions](./source-tree.md#key-source-tree-decisions)
  - [Implementation Patterns](./implementation-patterns.md)
    - [Pattern 1: Coordinator Structure with AgentDefinition](./implementation-patterns.md#pattern-1-coordinator-structure-with-agentdefinition)
    - [Pattern 2: Checkpoint-Based State Passing (Essential for Agent Context Isolation)](./implementation-patterns.md#pattern-2-checkpoint-based-state-passing-essential-for-agent-context-isolation)
    - [Pattern 3: Parallel Batch Processing with SDK](./implementation-patterns.md#pattern-3-parallel-batch-processing-with-sdk)
    - [Pattern 4: Graceful Degradation with WebFetch → Playwright Fallback](./implementation-patterns.md#pattern-4-graceful-degradation-with-webfetch-playwright-fallback)
    - [Pattern 5: MCP Server Integration (No Queue Needed)](./implementation-patterns.md#pattern-5-mcp-server-integration-no-queue-needed)
  - [Infrastructure and Deployment](./infrastructure-and-deployment.md)
    - [Infrastructure as Code](./infrastructure-and-deployment.md#infrastructure-as-code)
    - [Deployment Strategy](./infrastructure-and-deployment.md#deployment-strategy)
    - [Environments](./infrastructure-and-deployment.md#environments)
    - [Environment Promotion Flow](./infrastructure-and-deployment.md#environment-promotion-flow)
    - [Rollback Strategy](./infrastructure-and-deployment.md#rollback-strategy)
  - [Error Handling Strategy](./error-handling-strategy.md)
    - [General Approach](./error-handling-strategy.md#general-approach)
    - [Logging Standards](./error-handling-strategy.md#logging-standards)
    - [Error Handling Patterns](./error-handling-strategy.md#error-handling-patterns)
      - [External API Errors](./error-handling-strategy.md#external-api-errors)
      - [Business Logic Errors](./error-handling-strategy.md#business-logic-errors)
      - [Data Consistency](./error-handling-strategy.md#data-consistency)
  - [Coding Standards](./coding-standards.md)
    - [Core Standards](./coding-standards.md#core-standards)
    - [Critical Rules](./coding-standards.md#critical-rules)
    - [Naming Conventions](./coding-standards.md#naming-conventions)
  - [Test Strategy and Standards](./test-strategy-and-standards.md)
    - [Testing Philosophy](./test-strategy-and-standards.md#testing-philosophy)
    - [Test Types and Organization](./test-strategy-and-standards.md#test-types-and-organization)
      - [Unit Tests](./test-strategy-and-standards.md#unit-tests)
      - [Integration Tests](./test-strategy-and-standards.md#integration-tests)
      - [End-to-End Tests](./test-strategy-and-standards.md#end-to-end-tests)
    - [Test Data Management](./test-strategy-and-standards.md#test-data-management)
    - [Continuous Testing](./test-strategy-and-standards.md#continuous-testing)
  - [Security](./security.md)
    - [Input Validation](./security.md#input-validation)
    - [Authentication & Authorization](./security.md#authentication-authorization)
    - [Secrets Management](./security.md#secrets-management)
    - [API Security](./security.md#api-security)
    - [Data Protection](./security.md#data-protection)
    - [Dependency Security](./security.md#dependency-security)
    - [Security Testing](./security.md#security-testing)
  - [Risk Assessment](./risk-assessment.md)
    - [✅ Risks Resolved](./risk-assessment.md#risks-resolved)
    - [⚠️ Active Risks](./risk-assessment.md#active-risks)
    - [Risk Summary](./risk-assessment.md#risk-summary)
  - [Next Steps](./next-steps.md)
    - [1. Development Agent Handoff](./next-steps.md#1-development-agent-handoff)
    - [2. Configuration Schema Creation](./next-steps.md#2-configuration-schema-creation)
    - [3. External Dependencies Setup](./next-steps.md#3-external-dependencies-setup)
    - [4. Iterative Development by Epic](./next-steps.md#4-iterative-development-by-epic)
    - [5. Testing Milestones](./next-steps.md#5-testing-milestones)
    - [6. Documentation Updates](./next-steps.md#6-documentation-updates)
    - [Development Agent Prompt](./next-steps.md#development-agent-prompt)
